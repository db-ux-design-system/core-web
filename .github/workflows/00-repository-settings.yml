---
name: Repository Settings

permissions:
  contents: read

on:
  workflow_call:
    inputs:
      release:
        required: false
        default: "false"
        type: string
      preRelease:
        required: false
        default: "false"
        type: string
    outputs:
      name:
        description: "Branch or Tag name"
        value: ${{ jobs.repository-settings.outputs.name }}
      baseUrl:
        description: "Base URL for the repository"
        value: ${{ jobs.repository-settings.outputs.baseUrl }}
      repoName:
        description: "Repository name"
        value: ${{ jobs.repository-settings.outputs.repoName }}
      repoOwner:
        description: "Repository owner"
        value: ${{ jobs.repository-settings.outputs.repoOwner }}

jobs:
  repository-settings:
    name: Repository Settings
    runs-on: ubuntu-24.04
    outputs:
      name: ${{ steps.extract-name-and-base.outputs.result.name }}
      baseUrl: ${{ steps.extract-name-and-base.outputs.result.baseUrl }}
      repoName: ${{ steps.extract-name-and-base.outputs.result.repo }}
      repoOwner: ${{ steps.extract-name-and-base.outputs.result.owner }}
    steps:
      - name: ‚è¨ Checkout repo
        uses: actions/checkout@v5

      - name: üõ§ Get base path
        id: extract-name-and-base
        uses: actions/github-script@v8
        with:
          result-encoding: json
          script: |
            const { default: extractNameAndBaseUrl } = await import('${{ github.workspace }}/scripts/github/extract-name-and-base-url.js');
            return await extractNameAndBaseUrl(context);
