@use "notification-grid-shared" as shared;

// Reusable mixin for all 8 progressive enhancement combinations
@mixin apply-layouts(
	$base-areas,
	$base-cols,
	$close-areas,
	$close-cols,
	$header-areas,
	$header-cols,
	$header-close-areas,
	$header-close-cols,
	$icon-areas,
	$icon-cols,
	$icon-close-areas,
	$icon-close-cols,
	$icon-header-areas,
	$icon-header-cols,
	$icon-header-close-areas,
	$icon-header-close-cols
) {
	@include shared.shared-base-grid($base-areas, $base-cols);
	@include shared.shared-with-close($close-areas, $close-cols);
	@include shared.shared-with-header($header-areas, $header-cols);
	@include shared.shared-with-header-close(
		$header-close-areas,
		$header-close-cols
	);
	@include shared.shared-with-icon($icon-areas, $icon-cols);
	@include shared.shared-with-icon-close($icon-close-areas, $icon-close-cols);
	@include shared.shared-with-icon-header(
		$icon-header-areas,
		$icon-header-cols
	);
	@include shared.shared-with-icon-header-close(
		$icon-header-close-areas,
		$icon-header-close-cols
	);
}

// Layout for overlay with timestamp in content area
@mixin overlay-timestamp-layouts() {
	@include apply-layouts(
		// Base: content + timestamp
		"content timestamp",
		1fr min-content,
		// + close
		"content timestamp close",
		1fr min-content min-content,
		// + header
		"head timestamp" "content content",
		1fr min-content,
		// + header + close
		"head timestamp close" "content content content",
		1fr min-content min-content,
		// + icon
		"icon content timestamp",
		min-content 1fr min-content,
		// + icon + close
		"icon content timestamp close",
		min-content 1fr min-content min-content,
		// + icon + header
		"icon head timestamp" "icon content content",
		min-content 1fr min-content,
		// + icon + header + close
		"icon head timestamp close" "icon content content content",
		min-content 1fr min-content min-content
	);
}

// Layout for overlay with block link (no timestamp)
@mixin overlay-block-without-timestamp() {
	@include apply-layouts(
		// Base: content + link
		"content" "link",
		1fr,
		// + close
		"content close" "link link",
		1fr min-content,
		// + header
		"head" "content" "link",
		1fr,
		// + header + close
		"head close" "content content" "link link",
		1fr min-content,
		// + icon
		"icon content" "icon link",
		min-content 1fr,
		// + icon + close
		"icon content close" "icon link link",
		min-content 1fr min-content,
		// + icon + header
		"icon head" "icon content" "icon link",
		min-content 1fr,
		// + icon + header + close
		"icon head close" "icon content content" "icon link link",
		min-content 1fr min-content
	);
}

// Layout for overlay with block link + timestamp
@mixin overlay-block-with-timestamp() {
	@include apply-layouts(
		// Base: content + timestamp + link
		"content timestamp" "link link",
		1fr min-content,
		// + close
		"content timestamp close" "link link link",
		1fr min-content min-content,
		// + header
		"head timestamp" "content content" "link link",
		1fr min-content,
		// + header + close
		"head timestamp close" "content content content" "link link link",
		1fr min-content min-content,
		// + icon
		"icon content timestamp" "icon link link",
		min-content 1fr min-content,
		// + icon + close
		"icon content timestamp close" "icon link link link",
		min-content 1fr min-content min-content,
		// + icon + header
		"icon head timestamp" "icon content content" "icon link link",
		min-content 1fr min-content,
		// + icon + header + close
		"icon head timestamp close" "icon content content content"
			"icon link link link",
		min-content 1fr min-content min-content
	);
}

%grid-layout-variant-overlay {
	// Default: inline links or timestamp use the timestamp area
	@include overlay-timestamp-layouts;

	// Block link with timestamp
	&:has(span)[data-link-variant="block"] {
		@include overlay-block-with-timestamp;
	}

	// Block link without timestamp
	&:not(:has(span))[data-link-variant="block"] {
		@include overlay-block-without-timestamp;
	}
}
