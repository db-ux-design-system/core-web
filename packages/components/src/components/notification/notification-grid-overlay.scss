@use "notification-grid-shared" as shared;

// Wrapper mixins for overlay variants that use shared grid logic
@mixin overlay-base-grid($areas, $columns) {
	@include shared.shared-base-grid($areas, $columns);
}

@mixin overlay-with-close($areas, $columns) {
	@include shared.shared-with-close($areas, $columns);
}

@mixin overlay-with-header($areas, $columns) {
	@include shared.shared-with-header($areas, $columns);
}

@mixin overlay-with-header-close($areas, $columns) {
	@include shared.shared-with-header-close($areas, $columns);
}

@mixin overlay-with-icon($areas, $columns) {
	@include shared.shared-with-icon($areas, $columns);
}

@mixin overlay-with-icon-close($areas, $columns) {
	@include shared.shared-with-icon-close($areas, $columns);
}

@mixin overlay-with-icon-header($areas, $columns) {
	@include shared.shared-with-icon-header($areas, $columns);
}

@mixin overlay-with-icon-header-close($areas, $columns) {
	@include shared.shared-with-icon-header-close($areas, $columns);
}

@mixin overlay-inline-layouts() {
	// 1. Base layout: content + timestamp (progressively enhanced by subsequent mixins when additional elements are detected such as close button, header, or icon)
	@include overlay-base-grid("content timestamp", 1fr min-content);
	@include overlay-with-close(
		"content timestamp close",
		1fr min-content min-content
	);

	// 2. Progressive enhancement: adds headline
	@include overlay-with-header(
		"head timestamp" "content content",
		1fr min-content
	);
	@include overlay-with-header-close(
		"head timestamp close" "content content content",
		1fr min-content min-content
	);

	// 3. Progressive enhancement: adds icon or image
	@include overlay-with-icon(
		"icon content timestamp",
		min-content 1fr min-content
	);
	@include overlay-with-icon-close(
		"icon content timestamp close",
		min-content 1fr min-content min-content
	);
	@include overlay-with-icon-header(
		"icon head timestamp" "icon content content",
		min-content 1fr min-content
	);
	@include overlay-with-icon-header-close(
		"icon head timestamp close" "icon content content content",
		min-content 1fr min-content min-content
	);
}

@mixin overlay-block-layouts-without-timestamp() {
	// 1. Base layout: content + block link (overridden by subsequent mixins when additional elements detected)
	@include overlay-base-grid("content" "link", 1fr);
	@include overlay-with-close("content close" "link link", 1fr min-content);

	// 2. Progressive enhancement: adds headline
	@include overlay-with-header("head" "content" "link", 1fr);
	@include overlay-with-header-close(
		"head close" "content content" "link link",
		1fr min-content
	);

	// 3. Progressive enhancement: adds icon or image
	@include overlay-with-icon("icon content" "icon link", min-content 1fr);
	@include overlay-with-icon-close(
		"icon content close" "icon link link",
		min-content 1fr min-content
	);
	@include overlay-with-icon-header(
		"icon head" "icon content" "icon link",
		min-content 1fr
	);
	@include overlay-with-icon-header-close(
		"icon head close" "icon content content" "icon link link",
		min-content 1fr min-content
	);
}

@mixin overlay-block-layouts() {
	// 1. Base layout when content, timestamp, and block link are present (more specific rules apply when additional elements are detected)
	@include overlay-base-grid(
		"content timestamp" "link link",
		1fr min-content
	);
	@include overlay-with-close(
		"content timestamp close" "link link link",
		1fr min-content min-content
	);

	// 2. Progressive enhancement: adds headline
	@include overlay-with-header(
		"head timestamp" "content content" "link link",
		1fr min-content
	);
	@include overlay-with-header-close(
		"head timestamp close" "content content content" "link link link",
		1fr min-content min-content
	);

	// 3. Progressive enhancement: adds icon or image
	@include overlay-with-icon(
		"icon content timestamp" "icon link link",
		min-content 1fr min-content
	);
	@include overlay-with-icon-close(
		"icon content timestamp close" "icon link link link",
		min-content 1fr min-content min-content
	);
	@include overlay-with-icon-header(
		"icon head timestamp" "icon content content" "icon link link",
		min-content 1fr min-content
	);
	@include overlay-with-icon-header-close(
		"icon head timestamp close" "icon content content content"
			"icon link link link",
		min-content 1fr min-content min-content
	);
}

%grid-layout-variant-overlay {
	// For overlay with timestamp but no block link - use inline timestamp layout
	&:has(span):not([data-link-variant="block"]) {
		@include overlay-inline-layouts;
	}

	// For overlay with timestamp AND block link - timestamp top right, link bottom
	&:has(span)[data-link-variant="block"] {
		@include overlay-block-layouts;
	}

	// Matches overlays that have a block link variant but do NOT contain a <span> (timestamp), ensuring correct grid layout for this case.
	// For overlay with block link but NO timestamp - use overlay block layout without timestamp
	&:not(:has(span))[data-link-variant="block"] {
		@include overlay-block-layouts-without-timestamp;
	}
}
