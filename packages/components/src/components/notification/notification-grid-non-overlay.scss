%grid-layout-variant-not-overlay {
	span {
		display: none;
	}
}

@mixin non-overlay-base-grid($areas, $columns) {
	grid-template-areas: $areas;
	grid-template-columns: $columns;
}

@mixin non-overlay-with-close($areas, $columns) {
	&:has(.db-button) {
		grid-template-areas: $areas;
		grid-template-columns: $columns;
	}
}

@mixin non-overlay-with-header($areas, $columns) {
	&:has(header) {
		grid-template-areas: $areas;
		grid-template-columns: $columns;
	}
}

@mixin non-overlay-with-header-close($areas, $columns) {
	&:has(header):has(.db-button) {
		grid-template-areas: $areas;
		grid-template-columns: $columns;
	}
}

@mixin non-overlay-with-icon($areas, $columns) {
	&[data-icon],
	&[data-semantic]:not([data-semantic="adaptive"]),
	&:has(img) {
		grid-template-areas: $areas;
		grid-template-columns: $columns;
	}
}

@mixin non-overlay-with-icon-close($areas, $columns) {
	&[data-icon]:has(.db-button),
	&[data-semantic]:not([data-semantic="adaptive"]):has(.db-button),
	&:has(img):has(.db-button) {
		grid-template-areas: $areas;
		grid-template-columns: $columns;
	}
}

@mixin non-overlay-with-icon-header($areas, $columns) {
	&[data-icon]:has(header),
	&[data-semantic]:not([data-semantic="adaptive"]):has(header),
	&:has(img):has(header) {
		grid-template-areas: $areas;
		grid-template-columns: $columns;
	}
}

@mixin non-overlay-with-icon-header-close($areas, $columns) {
	&[data-icon]:has(header):has(.db-button),
	&[data-semantic]:not([data-semantic="adaptive"]):has(header):has(
			.db-button
		),
	&:has(img):has(header):has(.db-button) {
		grid-template-areas: $areas;
		grid-template-columns: $columns;
	}
}

@mixin non-overlay-block-link-layouts() {
	// 1. Base: content + block link (no additional elements)
	@include non-overlay-base-grid("content" "link", 1fr);
	@include non-overlay-with-close(
		"content close" "link link",
		1fr min-content
	);

	// 2. Adds: headline
	@include non-overlay-with-header("head" "content" "link", 1fr);
	@include non-overlay-with-header-close(
		"head close" "content content" "link link",
		1fr min-content
	);

	// 3. Adds: icon or image
	@include non-overlay-with-icon("icon content" "icon link", min-content 1fr);
	@include non-overlay-with-icon-close(
		"icon content close" "icon link link",
		min-content 1fr min-content
	);
	@include non-overlay-with-icon-header(
		"icon head" "icon content" "icon link",
		min-content 1fr
	);
	@include non-overlay-with-icon-header-close(
		"icon head close" "icon content content" "icon link link",
		min-content 1fr min-content
	);
}

%grid-layout-variant-not-overlay {
	// Hide timestamp for non-overlay variants only
	span {
		display: none;
	}

	// Apply block link layout when:
	// - has link element
	// - not inline link variant (i.e., block or unspecified)
	&:has(a):not([data-link-variant="inline"]) {
		@include non-overlay-block-link-layouts;
	}
}
