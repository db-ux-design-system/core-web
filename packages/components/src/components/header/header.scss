@use "@db-ui/foundations/build/scss/variables" as *;
@use "@db-ui/foundations/build/scss/variables.global" as *;
@use "@db-ui/foundations/build/scss/helpers/functions" as *;
@use "@db-ui/foundations/build/scss/helpers/component" as *;
@use "@db-ui/foundations/build/scss/tonality" as *;

.db-header {
	background-color: $db-colors-neutral-bg;
	box-shadow: $db-elevation-4;
	display: flex;
	flex-direction: column;
	margin-block-end: $db-spacing-fixed-2xs;
	position: relative;

	min-block-size: $default-mobile-header-height;

	@include screen("m") {
		--db-drawer-max-width: #{$db-screens-s};
	}

	.db-link {
		display: inline-block;
	}

	&[data-on-forcing-mobile="true"] {
		/*
		We make the header invisible for a short time if the user passes in force-mobile property.
		We do it because otherwise we see the default desktop-navigation for some mil. sec.
		*/
		visibility: hidden;
	}
}

.db-header-navigation-bar {
	display: flex;
	position: relative;
	padding: $db-spacing-fixed-xs $db-spacing-fixed-md;
	gap: $db-spacing-fixed-xs;
	inline-size: 100%;
	align-items: center;

	@include screen("m") {
		padding: $db-spacing-fixed-md;
	}
}

.db-header-meta-navigation {
	@extend %db-ui-functional;
	@include divider("top");
	display: flex;
	flex-direction: column;
	gap: $db-spacing-fixed-sm;
	justify-content: end;
	background-color: $db-colors-neutral-bg-2-enabled;

	padding: $db-spacing-fixed-md;

	@include screen("m") {
		padding: $db-spacing-fixed-xs $db-spacing-fixed-md;
		margin: 0;
		flex-direction: row;
	}

	&:empty {
		display: none;
	}
}

.db-header-navigation-container {
	display: inherit;
	flex: 1 1 auto;
	inline-size: 100%;
	gap: inherit;
	align-items: center;
}

.db-header-call-to-action {
	margin-inline-start: auto;
}

.db-header-brand-container:not(:has(> :nth-child(1))) {
	display: none;
}

.db-header-action-container:has(> .db-header-action-bar:empty) {
	@include screen("m") {
		display: none;
	}
}

.db-header-brand-container {
	@include screen("m") {
		@include divider("left", "after");

		&::after {
			position: inherit;
			block-size: 100%;
			margin-inline: $db-spacing-fixed-sm;
		}
	}
}

.db-header-action-container {
	@include divider("left");

	&::before {
		position: inherit;
		block-size: 100%;

		@include screen("m") {
			margin-inline-end: $db-spacing-fixed-sm;
		}
	}
}

.db-header-brand-container,
.db-header-action-container {
	align-items: center;
	block-size: 100%;
	display: inherit;
	gap: inherit;
	flex: 0 1 auto;
	flex-grow: 0;
	flex-shrink: 0;
}

.db-header-action-bar {
	@include divider("top");
	flex: 0 1 auto;
	flex-grow: 0;
	flex-shrink: 0;
	padding-block-start: $db-spacing-fixed-xs;

	@include screen("m") {
		&::before {
			display: none;
		}
	}
}

.db-header-drawer-navigation {
	display: flex;
	flex-direction: column;
	flex: 1 1 auto;
	block-size: 100%;
	overflow: auto;
	justify-content: space-between;
}

.db-header-navigation {
	padding-block: $db-spacing-fixed-md;
}

.db-header-navigation,
.db-header-action-bar {
	display: flex;
	gap: $db-spacing-fixed-sm;
	padding-inline: $db-spacing-fixed-md;

	@include screen("m") {
		gap: $db-spacing-fixed-xs;
		padding: 0;
	}
}

.db-header-drawer {
	--db-drawer-content-padding-inline: 0;
	// 1px for box shadow of header
	--db-drawer-header-padding-block-end: calc(1px + #{$db-spacing-fixed-xs});
	padding-block-end: 0;

	& .db-drawer-content {
		display: flex;
		flex-direction: column;
		block-size: 100%;
		overflow: hidden;
	}
}

[data-hide-on="mobile"] {
	display: none;

	@include screen("m") {
		display: inherit;
	}
}

[data-hide-on="desktop"] {
	@include screen("m") {
		display: none;
	}
}
