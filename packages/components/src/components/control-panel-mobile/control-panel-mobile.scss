@use "@db-ux/core-foundations/build/styles/variables";
@use "@db-ux/core-foundations/build/styles/screen-sizes";
@use "@db-ux/core-foundations/build/styles/helpers";
@use "@db-ux/core-foundations/build/styles/colors";
@use "../../styles/internal/component";
@use "../../styles/internal/control-panel-mobile";
@use "../../styles/internal/navigation-item";
@use "../../styles/internal/db-puls";

.db-control-panel-mobile {
	background-color: colors.$db-adaptive-bg-basic-level-1-default;
	display: grid;
	position: relative;
	min-block-size: component.$min-mobile-header-height;
	gap: variables.$db-spacing-fixed-xs;
	padding: variables.$db-spacing-fixed-xs variables.$db-spacing-fixed-md;

	&[data-position="top"] {
		@extend %control-panel-mobile-position-top;
	}

	&[data-position="bottom"] {
		@extend %control-panel-mobile-position-bottom;
	}

	> .db-control-panel-brand {
		justify-self: self-start;
		inline-size: 100%;
		white-space: nowrap;
		overflow: hidden;
		text-overflow: ellipsis;
	}

	> .db-control-panel-mobile-button {
		grid-area: drawer-button;
	}

	> .db-drawer {
		--db-drawer-content-padding-inline: 0;
		--db-drawer-max-width: #{screen-sizes.$db-breakpoint-xs};
		--db-drawer-max-height: 63vh;

		> .db-drawer-container {
			> .db-drawer-content {
				display: flex;
				flex-direction: column;
				block-size: 100%;

				.db-control-panel-secondary-actions {
					flex-shrink: 0;
					padding-inline: variables.$db-spacing-fixed-md;
					padding-block-start: variables.$db-spacing-fixed-xs;

					@include helpers.divider("top");
				}

				.db-control-panel-mobile-drawer-scroll-container {
					display: flex;
					flex-direction: column;
					overflow-y: auto;
					block-size: 100%;

					.db-control-panel-meta-navigation {
						padding: variables.$db-spacing-fixed-md;
						margin-block-start: auto;

						@include helpers.divider("top");
					}

					.db-navigation {
						padding: variables.$db-spacing-fixed-md;

						> .overflow-scroll-left-button,
						> .overflow-scroll-right-button {
							display: none;
						}

						> menu {
							@include navigation-item.direct-navigation-items {
								@extend %db-puls;
								@include db-puls.set-db-puls-vertical();

								@include navigation-item.active-navigation-item {
									@include db-puls.show-db-puls-vertical();

									&::after {
										// Mobile navigation item is always sizing-md
										// We add this fixed block-size to avoid issues with tree navigation
										block-size: variables.$db-sizing-md;
										inset-block-start: calc(
											#{variables.$db-sizing-md} / 2
										);
									}
								}
							}
						}
					}
				}
			}
		}
	}
}
