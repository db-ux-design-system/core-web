@use "@db-ux/core-foundations/build/styles/variables";
@use "@db-ux/core-foundations/build/styles/screen-sizes";
@use "../../styles/internal/control-panel-desktop";
@use "../../styles/internal/control-panel-mobile";

%fade-in-loading-fonts {
	&[data-fade-in="true"] {
		opacity: 0;

		&:not([data-fonts-loaded]),
		&[data-fonts-loaded="true"] {
			opacity: 1;
		}

		@media screen and (prefers-reduced-motion: no-preference) {
			transition: opacity variables.$db-transition-straight-emotional;
		}
	}
}

body {
	overflow: hidden;
}

.db-shell {
	@extend %fade-in-loading-fonts;

	block-size: 100vh;
	inline-size: 100vw;
	display: grid;

	> main {
		grid-area: main;
		overflow-y: auto;
	}

	> main,
	> header {
		max-inline-size: 100vw;
	}

	> .db-control-panel-desktop,
	> .db-control-panel-mobile {
		grid-area: control-panel;
	}

	&[data-control-panel-desktop-position="left"] {
		> .db-control-panel-desktop {
			@extend %control-panel-desktop-vertical-orientation;
		}
	}

	&[data-control-panel-desktop-position="top"] {
		> .db-control-panel-desktop {
			@extend %control-panel-desktop-horizontal-orientation;
		}
	}

	&[data-control-panel-mobile-position="top"] {
		> .db-control-panel-mobile {
			@extend %control-panel-mobile-position-top;
		}
	}

	&[data-control-panel-mobile-position="bottom"] {
		> .db-control-panel-mobile {
			@extend %control-panel-mobile-position-bottom;
		}
	}

	@include screen-sizes.screen-min-max(
		(
			min: "sm"
		)
	) {
		&[data-control-panel-desktop-position="left"] {
			grid-template-columns: [control-panel] min-content [main] 1fr;
		}

		&[data-control-panel-desktop-position="top"] {
			grid-template-rows: [control-panel] min-content [main] 1fr;
		}

		> .db-control-panel-mobile {
			display: none;
		}
	}

	@include screen-sizes.screen-min-max(
		(
			max: "sm"
		)
	) {
		&[data-control-panel-mobile-position="top"] {
			grid-template-areas: "control-panel" "main";
			grid-template-rows: [control-panel] min-content [main] 1fr;
		}

		&[data-control-panel-mobile-position="bottom"] {
			grid-template-areas: "main" "control-panel";
			grid-template-rows: [main] 1fr [control-panel] min-content;
		}

		> .db-control-panel-desktop {
			display: none;
		}
	}
}
