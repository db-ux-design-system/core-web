@use "@db-ui/foundations/build/scss/variables" as *;
@use "@db-ui/foundations/build/scss/variables.global" as var;
@use "@db-ui/foundations/build/scss/helpers/functions" as functions;
@use "@db-ui/foundations/build/scss/icon/icons.helpers" as icons;
@use "@db-ui/foundations/build/scss/helpers/component" as component;
@use "@db-ui/foundations/build/scss/color/color-variants" as col-var;
@use "@db-ui/foundations/build/scss/animation/animations" as animations;
@use "../../styles/form-components" as *;

.db-accordion-item {
	@extend %bg-transparent;
	@include functions.divider($position: "top");

	position: relative;
	inline-size: 100%;

	&:last-of-type {
		@include functions.divider($position: "bottom", $slot: "after");
	}

	&[aria-disabled="true"] {
		pointer-events: none;
		opacity: component.$default-opacity;
	}

	summary {
		@extend %dropdown-icon;
		@include col-var.bg-transparent-interactive(false);

		list-style: none;
		display: flex;
		justify-content: space-between;
		padding: var.$db-spacing-fixed-md;
		gap: var.$db-spacing-fixed-md;

		&::after {
			inset-inline-end: var.$db-spacing-fixed-sm;
		}

		&:focus-visible {
			// TODO: Evaluate whether this number is intended
			border-radius: component.$default-border-radius + 2;
		}

		.db-ui-functional & {
			@include icons.icon-meta(
				$size: 20,
				$position: "after",
				$font-size: 20
			);
		}
	}

	&[open] {
		summary::after {
			transform: $dropdown-icon-transform;
		}

		.db-accordion-content {
			animation: accordion-open $db-transition-emotional-straight normal
				both;
		}
	}
}

.db-accordion-content {
	padding: var.$db-spacing-fixed-md;
	padding-block-end: var.$db-spacing-fixed-lg;
}
