@use "sass:map";
@use "@db-ui/foundations/build/styles/variables";
@use "@db-ui/foundations/build/styles/colors";
@use "@db-ui/foundations/build/styles/icons";
@use "@db-ui/foundations/build/styles/fonts";
@use "../../styles/internal/form-components";
@use "../../styles/internal/component";
@use "../../styles/select-components";

.db-select {
	--db-form-component-padding-inline-end: #{select-components.$select-icon-padding};
	// shared from form-components
	@extend %select-icon;
	@extend %select-placeholder;

	@include form-components.set-default-form-component(select);

	min-inline-size: calc(
		4 * #{variables.$db-sizing-md} + var(--db-form-has-before) *
			#{variables.$db-sizing-md}
	);

	select {
		text-indent: select-components.$has-before-padding;
	}

	// Most likely this wouldn't work on MacOS, but we're still progressively enhancing Windows by this
	option {
		background-color: colors.$db-adaptive-bg-basic-level-1-default;
		color: colors.$db-adaptive-on-bg-basic-emphasis-100-default;
	}

	&[data-hide-label="true"] {
		--db-label-visible-height: 0;
		--db-label-visible-spacing: 1;
	}

	&:has(> select option:checked:not([hidden])) {
		[id$="-placeholder"] {
			display: none;
		}
	}
}
