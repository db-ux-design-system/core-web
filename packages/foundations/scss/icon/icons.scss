@use "icons.helpers" as *;
@use "icons.placeholder" as *;
@use "../variables.global" as *;
@forward "icons.attributes-mappings";
@forward "icons.custom-properties";
@forward "icons.font-faces";

[data-icon],
[data-icon-before] {
	&::before {
		@extend %icon !optional;
		content: var(--icon-glyph-before);

		// Hiding icon from screenreaders
		@supports (content: ""/"") {
			content: var(--icon-glyph-before) / ""; // https://www.w3.org/TR/css-content-3/#alt
		}

		margin-inline-end: var(--icon-margin-after, #{$db-spacing-fixed-xs});
	}
}

[data-icon-after] {
	&::after {
		@extend %icon !optional;
		content: var(--icon-glyph-after);

		// Hiding icon from screenreaders
		@supports (content: ""/"") {
			content: var(--icon-glyph-after) / ""; // https://www.w3.org/TR/css-content-3/#alt
		}

		margin-inline-start: var(--icon-margin-before, #{$db-spacing-fixed-xs});
	}
}

// Providing a mechanism for text replacements
.is-icon-text-replace {
	&[data-icon],
	&[data-icon-before] {
		@include is-icon-text-replace();
	}

	&[data-icon-after] {
		@include is-icon-text-replace("after");
	}
}
