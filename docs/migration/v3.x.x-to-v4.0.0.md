## Migration (3.x.x) ➡ 4.0.0

## Refactoring of Header and Navigation

We encountered some problems with the current `DBHeader` as well with the `DBNavigation`.
By splitting the `DBHeader` into 2 components (`DBControlPanelDesktop` & `DBControlPanelMobile`),
we are able to control our navigation based on the device size.
Additionally, we split the `DBNavigationItem` as well to provide a new `DBNavigationItemGroup` instead of
having a Slot with `subNavigation`.

For a detailed migration based on framework checkout those:

- [Angular](300-400/shell/Angular.md)
- [React](300-400/shell/React.md)
- [Vue](300-400/shell/Vue.md)

### Changes in DBPage ➡️ DBShell

- **Mandatory Usage**: The `DBShell` component is now mandatory and replaces the optional `DBPage`.
- **Removed Properties**: The following properties from `DBPage` are no longer supported in `DBShell`:
    - `documentOverflow`
    - `variant`
    - `footer`
- **Slot Changes**:
    - The `header` slot has been split into two new slots:
        - `controlPanelDesktop`
        - `controlPanelMobile`

### Changes in DBHeader ➡️ DBControlPanelDesktop/DBControlPanelMobile

- **Component Split**: The `DBHeader` has been split into two components:
    - `DBControlPanelDesktop`
    - `DBControlPanelMobile`
- **Slot Wrapping**: The following slots now require additional wrapping components:
    - `brand` ➡️ `DBControlPanelBrand`
    - `metaNavigation` ➡️ `DBControlPanelMetaNavigation`
    - `primaryActions` ➡️ `DBControlPanelPrimaryActions`
    - `secondaryActions` ➡️ `DBControlPanelSecondaryActions`

### Changes in Navigation ➡️ NavigationItemGroup

- **Slot Removal**: The `subNavigation` slot in `NavigationItem` has been removed.
- **New Component**: Use the new `NavigationItemGroup` component to group navigation items instead of relying on the `subNavigation` slot.

#### Example Migration

Before:

```html
<NavigationItem><a>Item</a></NavigationItem>
<NavigationItem>
	Group
	<template slot:sub-navigation>
		<NavigationItem><a>Sub Item 1</a></NavigationItem>
		<NavigationItem><a>Sub Item 2</a></NavigationItem>
	</template>
</NavigationItem>
```

After:

```html
<NavigationItem><a>Item</NavigationItem>
<NavigationItemGroup text="Group">
	<NavigationItem><a>Sub Item 1</a></NavigationItem>
	<NavigationItem><a>Sub Item 2</a></NavigationItem>
</NavigationItemGroup>
```

## Automate migration via CLI

We provide a CLI tool to auto migrate your source code. Use this command in your repository:

```shell
npx @db-ux/core-migration --type=v200_v300 --src=./src
```

Please check the changes made in your codebase afterwards, as this is mainly a simple search & replace and there might be unexpected changes of similar wordings to our properties for any other methods, or further code occurrences that don't even refer to properties.
