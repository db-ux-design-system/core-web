---
import DefaultLayout from '../../layouts/default/DefaultLayout.astro';
import DefaultComponent from '../../components/default/DefaultComponent.astro';
import defaultComponentVariants from '../../../../shared/drawer.json';
import type { DBDrawerProps } from '@components';
import { getPropsAsAttributes, getVariantsWithExamples } from '../../utils';

const exampleFn = ({
	id,
	width,
	rounded,
	spacing,
	direction,
	children,
	backdrop,
	variant,
}: DBDrawerProps) => {
	const buttonId = id || `button-${id}`;
	const props = { width, rounded, spacing, direction, backdrop, variant };

	return `
		<div>
			<db-button id="${buttonId}">Open: ${children}</db-button>
			<db-drawer id="${id}" ${getPropsAsAttributes(props)} onclose="this.removeAttribute('open')">
				${children}
			</db-drawer>
		</div>
		<script>
			document.querySelector("${buttonId}").addEventListener("click", function() {
				document.getElementById("${id}").setAttribute("open", "true");
			});
		</script>
	`;
};
const variants = getVariantsWithExamples<DBDrawerProps>(defaultComponentVariants, exampleFn);
---

<DefaultLayout>
	<DefaultComponent title="DBDrawer" variants={variants} />
</DefaultLayout>
