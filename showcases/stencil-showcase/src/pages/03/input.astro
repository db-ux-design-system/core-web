---
import DefaultLayout from '../../layouts/default/DefaultLayout.astro';
import DefaultComponent from '../../components/default/DefaultComponent.astro';
import defaultComponentVariants from '../../../../shared/input.json';
import type { DBInputProps } from '@components';
import VariantList from '../../components/default/VariantList.astro';
import type { DefaultComponentVariants } from '../../../../shared/default-component-data.ts';
import { DBInput } from '@components';
---

<DefaultLayout>
	<DefaultComponent title="DBInput" variants={defaultComponentVariants}
		>{
			(variant: DefaultComponentVariants) => (
				<VariantList {...variant}>
					{({ children, dataList, variant, ...props }: DBInputProps & { dataList?: boolean }) => {
						const id = Math.random().toString(36).substring(2, 15);
						const dataListValue =
							variant === 'floating'
								? JSON.stringify(['Test 1', 'Test 2'])
								: JSON.stringify([
										{ value: 'test1', label: 'Test 1' },
										{ value: 'test2', label: 'Test 2' },
								  ]);
						return (
							<>
								<DBInput name={id} placeholder={children} variant={variant} {...props} />
								{dataList && (
									<script define:vars={{ id, dataListValue }} is:inline>
										document.addEventListener('DOMContentLoaded', () => {
											document.querySelector(`db-input[name="${id}"]`).dataList = JSON.parse(dataListValue);
										});
									</script>
								)}
							</>
						);
					}}
				</VariantList>
			)
		}</DefaultComponent
	>
</DefaultLayout>
