import{j as a}from"./jsx-runtime-u17CrQMm.js";import{s as f,a as L,d as B,c as ee,g as te,b as x,f as ne,i as v,h as j,e as O}from"./index-cGbbigiG.js";import{r as n}from"./iframe-CgAvxnEq.js";import{b as z,c as U,d as V,i as N,e as h,D as ae,f as P}from"./constants-CD69XpC7.js";import{c as ie}from"./form-components-B5fJjToM.js";import{D as g}from"./infotext-CZi0xQss.js";function se(e,y){const G=n.useId(),s=y||n.useRef(y),[o,H]=n.useState(()=>{}),[b,p]=n.useState(()=>{}),[w,T]=n.useState(()=>{}),[E,q]=n.useState(()=>{}),[I,c]=n.useState(()=>{}),[S,_]=n.useState(()=>""),[W,r]=n.useState(()=>{}),[re,X]=n.useState(()=>""),[F,M]=n.useState(()=>!1),[K,l]=n.useState(()=>""),[k,$]=n.useState(()=>{});function D(){return!!(e.validMessage??e.validation==="valid")}function u(){!s.current?.validity.valid||e.validation==="invalid"?(r(E),c(e.invalidMessage||s.current?.validationMessage||h),j()&&(l(I),O(()=>l(""),1e3))):D()&&s.current?.validity.valid&&e.required?(r(w),j()&&(l(e.validMessage??P),O(()=>l(""),1e3))):f(e.message,e.showMessage)?r(b):e.placeholder?r(S):r(void 0)}function J(t){e.onClick&&e.onClick(t)}function R(t,i){e.onInput&&e.onInput(t),u()}function A(t,i){e.onChange&&e.onChange(t),u()}function Q(t){e.onBlur&&e.onBlur(t)}function Y(t){e.onFocus&&e.onFocus(t)}function m(t){return t.label??t.value?.toString()}function Z(){return e.variant==="floating"||!!e.placeholder?e.showEmptyOption!==void 0?e.showEmptyOption:!e.required:!1}return n.useEffect(()=>{M(!0);const t=e.id??`select-${G}`;H(t),p(t+z),T(t+U),q(t+V),_(t+N),c(e.invalidMessage||h)},[]),n.useEffect(()=>{c(e.invalidMessage||s.current?.validationMessage||h)},[s.current,e.invalidMessage]),n.useEffect(()=>{if(o&&F){const t=o+z,i=o+N;p(t),T(o+U),q(o+V),_(i),f(e.message,e.showMessage)?r(t):e.placeholder?r(i):r(void 0),u(),M(!1)}},[o,F]),n.useEffect(()=>{X(e.value)},[e.value]),n.useEffect(()=>{if(s.current){const i=e.defaultValue;let d=k;d||(d=new AbortController,$(d)),ie(s.current,{value:e.value,defaultValue:i},C=>{A(C),R(C)},d.signal)}},[s.current]),n.useEffect(()=>()=>{k?.abort()},[]),a.jsxs("div",{...te(e,["data-icon-variant","data-icon-variant-before","data-icon-variant-after","data-icon-weight","data-icon-weight-before","data-icon-weight-after","data-interactive","data-force-mobile","data-color","data-container-color","data-bg-color","data-on-bg-color","data-color-scheme","data-font-size","data-headline-size","data-divider","data-focus","data-font","data-density"]),className:ee("db-select",e.className),"data-variant":e.variant,"data-hide-label":B(e.showLabel),"data-hide-asterisk":B(e.showRequiredAsterisk),"data-icon":e.icon,"data-show-icon":L(e.showIcon),children:[a.jsx("label",{htmlFor:o,children:e.label??ae}),a.jsxs("select",{"aria-invalid":e.validation==="invalid","data-custom-validity":e.validation,ref:s,...ne(e,["data-icon-variant","data-icon-variant-before","data-icon-variant-after","data-icon-weight","data-icon-weight-before","data-icon-weight-after","data-interactive","data-force-mobile","data-color","data-container-color","data-bg-color","data-on-bg-color","data-color-scheme","data-font-size","data-headline-size","data-divider","data-focus","data-font","data-density"]),required:x(e.required,"required"),disabled:x(e.disabled,"disabled"),id:o,name:e.name,size:e.size,value:e.value,autoComplete:e.autocomplete,multiple:e.multiple,onInput:t=>R(t),onClick:t=>J(t),onChange:t=>A(t),onBlur:t=>Q(t),onFocus:t=>Y(t),"aria-describedby":e.ariaDescribedBy??W,children:[e.variant==="floating"||e.placeholder?a.jsx("option",{className:"placeholder",value:"","data-show-empty-option":L(Z())}):null,e.options?.length?a.jsx(a.Fragment,{children:e.options?.map(t=>t.options?a.jsx("optgroup",{label:m(t),children:t.options?.map(i=>a.jsx("option",{value:i.value,disabled:i.disabled,children:m(i)},v(i,"select-optgroup-option-")))},v(t,"select-optgroup-")):a.jsx("option",{value:t.value,disabled:t.disabled,children:m(t)},v(t,"select-option-")))}):a.jsx(a.Fragment,{children:e.children})]}),e.placeholder?a.jsx("span",{className:"db-select-placeholder",id:S,children:e.placeholder}):null,f(e.message,e.showMessage)?a.jsx(g,{size:"small",icon:e.messageIcon,id:b,children:e.message}):null,D()?a.jsx(g,{size:"small",semantic:"successful",id:w,children:e.validMessage||P}):null,a.jsx(g,{size:"small",semantic:"critical",id:E,children:I}),a.jsx("span",{"data-visually-hidden":"true",role:"status",children:K})]})}const oe=n.forwardRef(se);oe.__docgenInfo={description:"",methods:[],displayName:"DBSelect",props:{children:{required:!1,tsType:{name:"any"},description:"default slot"},className:{required:!1,tsType:{name:"string"},description:"React specific for adding className to the component."},class:{required:!1,tsType:{name:"union",raw:"string | any",elements:[{name:"string"},{name:"any"}]},description:"Workaround for TypeScript using class for all components."},id:{required:!1,tsType:{name:"string"},description:"[ID](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/id) of the component, generated automatically for some components as a fallback if unset."},autofocus:{required:!1,tsType:{name:"union",raw:"boolean | string",elements:[{name:"boolean"},{name:"string"}]},description:"Before using please check for the [accessibility concerns](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/autofocus#accessibility_concerns)"},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: ClickEvent<T>) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent<T, MouseEvent>",elements:[{name:"T"},{name:"MouseEvent"}]},name:"event"}],return:{name:"void"}}},description:"React specific onClick to pass to forward ref."},click:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: ClickEvent<T>) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent<T, MouseEvent>",elements:[{name:"T"},{name:"MouseEvent"}]},name:"event"}],return:{name:"void"}}},description:""},change:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: ChangeEvent<T>) => void",signature:{arguments:[{type:{name:"ReactChangeEvent",raw:"React.ChangeEvent<T>",elements:[{name:"T"}]},name:"event"}],return:{name:"void"}}},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: ChangeEvent<T>) => void",signature:{arguments:[{type:{name:"ReactChangeEvent",raw:"React.ChangeEvent<T>",elements:[{name:"T"}]},name:"event"}],return:{name:"void"}}},description:""},blur:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: InteractionEvent<T>) => void",signature:{arguments:[{type:{name:"ReactFocusEvent",raw:"React.FocusEvent<T>",elements:[{name:"T"}]},name:"event"}],return:{name:"void"}}},description:""},onBlur:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: InteractionEvent<T>) => void",signature:{arguments:[{type:{name:"ReactFocusEvent",raw:"React.FocusEvent<T>",elements:[{name:"T"}]},name:"event"}],return:{name:"void"}}},description:""},focus:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: InteractionEvent<T>) => void",signature:{arguments:[{type:{name:"ReactFocusEvent",raw:"React.FocusEvent<T>",elements:[{name:"T"}]},name:"event"}],return:{name:"void"}}},description:""},onFocus:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: InteractionEvent<T>) => void",signature:{arguments:[{type:{name:"ReactFocusEvent",raw:"React.FocusEvent<T>",elements:[{name:"T"}]},name:"event"}],return:{name:"void"}}},description:""},input:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: InputEvent<T>) => void",signature:{arguments:[{type:{name:"ReactFormEvent",raw:"React.FormEvent<T>",elements:[{name:"T"}]},name:"event"}],return:{name:"void"}}},description:""},onInput:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: InputEvent<T>) => void",signature:{arguments:[{type:{name:"ReactFormEvent",raw:"React.FormEvent<T>",elements:[{name:"T"}]},name:"event"}],return:{name:"void"}}},description:""},ariaDescribedBy:{required:!1,tsType:{name:"string"},description:"Overwrites auto handling for aria-describedby."},form:{required:!1,tsType:{name:"string"},description:"Associates the control with a form element"},validation:{required:!1,tsType:{name:"unknown[number]",raw:"(typeof ValidationList)[number]"},description:"Marks an input element as invalid (red) / valid (green) / no-validation (grey). Overwrites the :user-valid selector."},disabled:{required:!1,tsType:{name:"union",raw:"boolean | string",elements:[{name:"boolean"},{name:"string"}]},description:"The disabled attribute can be set to keep a user from clicking on the form element."},label:{required:!1,tsType:{name:"string"},description:"The label attribute specifies the caption of the form element."},name:{required:!1,tsType:{name:"string"},description:"The name attribute gives the name of the form control, as used in form submission and in the form element's elements object."},required:{required:!1,tsType:{name:"union",raw:"boolean | string",elements:[{name:"boolean"},{name:"string"}]},description:"When the required attribute specified, the user will be required to fill the form element before submitting the form.\nThe form element will be marked semantically as required and by default also visually with an asterisk '*' next to the label (unless the property `showRequiredAsterisk` is also set with the value `false`)."},showRequiredAsterisk:{required:!1,tsType:{name:"union",raw:"boolean | string",elements:[{name:"boolean"},{name:"string"}]},description:"This attribute allows to specify whether a form field which is marked as required will show a visual indicator (an asterisk '*').\nIt allows to prevent adding the visual indicator but still keep the field semantically required by setting its value to `false`.\nBy default, its value is `true`, so the asterisk is shown when `required` is set."},showLabel:{required:!1,tsType:{name:"union",raw:"boolean | string",elements:[{name:"boolean"},{name:"string"}]},description:"Enables/disables the visibility of the label"},value:{required:!1,tsType:{name:"any"},description:"The value property is to receive results from the native form element."},icon:{required:!1,tsType:{name:"IconTypes"},description:"Define an icon by its identifier (like e.g. _user_, compare to [Icons](https://design-system.deutschebahn.com/core-web/review/main/foundations/icons/overview)) to get displayed in front of the elements content."},variant:{required:!1,tsType:{name:"unknown[number]",raw:"(typeof LabelVariantList)[number]"},description:"Change the variant of the label to float or hidden"},placeholder:{required:!1,tsType:{name:"string"},description:"Text that appears in the form control when it has no value set"},message:{required:!1,tsType:{name:"string"},description:"Optional helper message for form components"},validMessage:{required:!1,tsType:{name:"string"},description:"Helper message for valid form components"},invalidMessage:{required:!1,tsType:{name:"string"},description:"Helper message for invalid form components"},messageIcon:{required:!1,tsType:{name:"IconTypes"},description:"Set/overwrite icon for helper message for form components"},autocomplete:{required:!1,tsType:{name:"union",raw:"string | AutoCompleteType",elements:[{name:"string"},{name:"unknown[number]",raw:"(typeof AutoCompleteList)[number]"}]},description:"See https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/autocomplete"},showMessage:{required:!1,tsType:{name:"union",raw:"boolean | string",elements:[{name:"boolean"},{name:"string"}]},description:"Enables or disables the visibility of the message."},multiple:{required:!1,tsType:{name:"boolean"},description:`@deprecated
Enables multiple select, but it isn't styled, please use DBCustomSelect/db-custom-select instead`},options:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  /**
   * Identifier for option
   */
  id?: string;

  /**
   * Disables this option
   */
  disabled?: boolean;

  /**
   * Selects this option
   */
  selected?: boolean;

  /**
   * If the value is different from the label you want to show to the user.
   */
  label?: string;

  /**
   * If you want to use optgroup you can nest options here.
   */
  options?: DBSelectOptionType[];

  /**
   * The main value you select, will be shown as default label if no label is set.
   */
  value: string | string[] | number;
}`,signature:{properties:[{key:"id",value:{name:"string",required:!1},description:"Identifier for option"},{key:"disabled",value:{name:"boolean",required:!1},description:"Disables this option"},{key:"selected",value:{name:"boolean",required:!1},description:"Selects this option"},{key:"label",value:{name:"string",required:!1},description:"If the value is different from the label you want to show to the user."},{key:"options",value:{name:"Array",elements:[{name:"DBSelectOptionType"}],raw:"DBSelectOptionType[]",required:!1},description:"If you want to use optgroup you can nest options here."},{key:"value",value:{name:"union",raw:"string | string[] | number",elements:[{name:"string"},{name:"Array",elements:[{name:"string"}],raw:"string[]"},{name:"number"}],required:!0},description:"The main value you select, will be shown as default label if no label is set."}]}}],raw:"DBSelectOptionType[]"},description:"If you don't/can't use children/slots you can pass in the options as an array."},showEmptyOption:{required:!1,tsType:{name:"boolean"},description:"Controls whether the empty placeholder option is shown in the dropdown after the user's selection of another option.\nBy default, it is shown for non-required selects and hidden for required selects.\nSet to `true` to always show or `false` to always hide the empty option.\n\nNote: The empty option is only rendered when `variant === 'floating'` or a `placeholder` is set.\nSetting `showEmptyOption` alone has no effect if neither of these conditions is met."},showIcon:{required:!1,tsType:{name:"union",raw:"boolean | string",elements:[{name:"boolean"},{name:"string"}]},description:`Enables or disables the visibility of the icon. The default value depends on the component.
For many components this property is optional to reflect Figma properties.`},size:{required:!1,tsType:{name:"number"},description:"Size of the control"}}};export{oe as D};
