import{j as i}from"./jsx-runtime-u17CrQMm.js";import{c as q,g as x,f as L,a as c,e as P}from"./index-cGbbigiG.js";import{r}from"./iframe-CgAvxnEq.js";import{D as y}from"./document-scroll-listener-BixpNV2P.js";import{a as D}from"./floating-components-BNmGdAgy.js";function I(n,d){const a=d||r.useRef(d),[l,f]=r.useState(()=>!1),[u,m]=r.useState(()=>!1),[p,v]=r.useState(()=>{}),[g,w]=r.useState(()=>{});function h(e){if(!e||e.key==="Escape")for(const t of Array.from(a.current.children))t.blur()}function s(){if(!a.current)return;const e=a.current.querySelector("article");e&&P(()=>{D(e,a.current,n.placement??"bottom")},1)}function T(e){e?.target?.contains&&e?.target?.contains(a.current)&&s()}function E(){m(!0),v(new y().addCallback(t=>T(t))),s();const e=o();e&&g?.observe(e)}function S(e){{m(!1),p&&new y().removeCallback(p);const t=o();t&&g?.unobserve(t)}}function o(){if(a.current){const e=Array.from(a.current.children);if(e.length>=2){const t=e[0];return t.tagName.includes("-")?t.children?.length>0?t.children[0]:null:t}}return null}return r.useEffect(()=>{f(!0)},[]),r.useEffect(()=>{if(a.current&&l){f(!1);const e=o();e&&(e.ariaHasPopup="true"),s(),a.current.addEventListener("keydown",t=>h(t)),["mouseenter","focusin"].forEach(t=>{a.current.addEventListener(t,()=>E())}),["mouseleave","focusout"].forEach(t=>{a.current.addEventListener(t,()=>S())}),typeof window<"u"&&"IntersectionObserver"in window&&w(new IntersectionObserver(t=>{const b=t.find(({target:k})=>k===o());b&&!b.isIntersecting&&h(!1)}))}},[a.current,l]),r.useEffect(()=>{if(a.current){const e=o();e&&(e.ariaExpanded=(!!u).toString())}},[a.current,u]),i.jsxs("div",{ref:a,...L(n,["data-icon-variant","data-icon-variant-before","data-icon-variant-after","data-icon-weight","data-icon-weight-before","data-icon-weight-after","data-interactive","data-force-mobile","data-color","data-container-color","data-bg-color","data-on-bg-color","data-color-scheme","data-font-size","data-headline-size","data-divider","data-focus","data-font","data-density"]),id:n.id,...x(n,["data-icon-variant","data-icon-variant-before","data-icon-variant-after","data-icon-weight","data-icon-weight-before","data-icon-weight-after","data-interactive","data-force-mobile","data-color","data-container-color","data-bg-color","data-on-bg-color","data-color-scheme","data-font-size","data-headline-size","data-divider","data-focus","data-font","data-density"]),className:q("db-popover",n.className),children:[i.jsx(i.Fragment,{children:n.trigger}),i.jsx("article",{className:"db-popover-content","data-spacing":n.spacing,"data-gap":c(n.gap),"data-animation":c(n.animation??!0),"data-open":c(n.open),"data-delay":n.delay,"data-width":n.width,"data-placement":n.placement,children:n.children})]})}const _=r.forwardRef(I);_.__docgenInfo={description:"",methods:[],displayName:"DBPopover",props:{open:{required:!1,tsType:{name:"union",raw:"boolean | string",elements:[{name:"boolean"},{name:"string"}]},description:"Use open to disable the default hover/focus behavior to use it on click or other trigger."},trigger:{required:!1,tsType:{name:"any"},description:"The trigger to open the popover e.g. a button"},children:{required:!1,tsType:{name:"any"},description:"default slot"},className:{required:!1,tsType:{name:"string"},description:"React specific for adding className to the component."},class:{required:!1,tsType:{name:"union",raw:"string | any",elements:[{name:"string"},{name:"any"}]},description:"Workaround for TypeScript using class for all components."},id:{required:!1,tsType:{name:"string"},description:"[ID](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/id) of the component, generated automatically for some components as a fallback if unset."},autofocus:{required:!1,tsType:{name:"union",raw:"boolean | string",elements:[{name:"boolean"},{name:"string"}]},description:"Before using please check for the [accessibility concerns](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/autofocus#accessibility_concerns)"},spacing:{required:!1,tsType:{name:"union",raw:"SpacingType | string",elements:[{name:"unknown[number]",raw:"(typeof SpacingList)[number]"},{name:"string"}]},description:"The spacing attribute changes the padding of the component."},placement:{required:!1,tsType:{name:"unknown[number]",raw:"(typeof PlacementList)[number]"},description:"The `placement` attributes values change the position to absolute and adds a transform based on the placement."},gap:{required:!1,tsType:{name:"union",raw:"boolean | string",elements:[{name:"boolean"},{name:"string"}]},description:"If the absolute element should have a gap between the parent element."},delay:{required:!1,tsType:{name:"unknown[number]",raw:"(typeof PopoverDelayList)[number]"},description:"Add a delay before showing the tooltip"},animation:{required:!1,tsType:{name:"union",raw:"boolean | string",elements:[{name:"boolean"},{name:"string"}]},description:"Disable animation"},width:{required:!1,tsType:{name:"unknown[number]",raw:"(typeof PopoverWidthList)[number]"},description:"Use fixed with for default max-width"}}};export{_ as D};
