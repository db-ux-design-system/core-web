import{j as i}from"./jsx-runtime-u17CrQMm.js";import{b as f,a as h,c as N,g as D,f as E,e as S}from"./index-cGbbigiG.js";import{r as o}from"./iframe-CgAvxnEq.js";import{r as k}from"./constants-CD69XpC7.js";import{b as B}from"./floating-components-BNmGdAgy.js";import{D as R}from"./button-DnZnbJNC.js";const W=e=>{const{target:t}=e;return!!(!t?.classList?.contains("db-navigation-item-expand-button")&&t?.parentElement?.classList.contains("db-navigation-item"))};class M{constructor(t,n){this.parentSubNavigation=null,this.initialized=!1,this.mouseX=0,this.mouseY=0,this.element=t,this.subNavigation=n,!(!this.element||!this.subNavigation)&&(this.parentSubNavigation=this.element?.closest(".db-sub-navigation"),this.parentSubNavigation&&!this.element.closest(".db-drawer")&&this.init())}init(){const t=this.parentSubNavigation?.getBoundingClientRect().width??0;this.element?.style.setProperty("--db-navigation-item-inline-size",`${t}px`),this.initialized=!0}enableFollow(){if(!this.initialized||this.triangleData||!this.element||!this.subNavigation)return;const t=B(this.subNavigation),n=this.element.getBoundingClientRect(),s=this.parentSubNavigation?.getBoundingClientRect().width??0;this.triangleData={itemRect:n,parentElementWidth:s,subNavigationHeight:this.subNavigation.getBoundingClientRect().height,padding:(s-n.width)/2,outsideVX:t.vx,outsideVY:t.vy}}disableFollow(){this.triangleData=void 0}getTriangleTipX(){return this.triangleData?this.triangleData.outsideVX==="right"?this.triangleData.itemRect.width-this.mouseX:Math.min(this.mouseX,this.triangleData.itemRect.width*.75):0}getTriangleTipY(){if(!this.triangleData)return 0;const t=Math.max(Math.min(this.mouseY,this.triangleData.itemRect.height),0)+this.triangleData.padding;return this.triangleData.outsideVY==="bottom"?t+(this.triangleData.subNavigationHeight-this.triangleData.padding*2-this.triangleData.itemRect.height):t}hasMouseEnteredSubNavigation(){if(!this.triangleData)return!1;const t=this.triangleData.outsideVX==="right";return!!(t&&this.mouseX<-1*this.triangleData.padding||!t&&this.mouseX>this.triangleData.parentElementWidth-this.triangleData.padding)}getTriangleCoordinates(t){if(!this.triangleData)return;if(t==="fill-gap"){const d=`${this.triangleData.itemRect.height+2*this.triangleData.padding}px`,l=`${this.triangleData.parentElementWidth-this.triangleData.padding}px`;return{lb:`${l} ${d}`,lt:`${l} 0`,rt:"100% 0",rb:`100% ${d}`}}const n=this.getTriangleTipX(),s=this.getTriangleTipY(),u=`${n}px ${s}px`,r=`${n}px ${s}px`;return{lb:u,lt:r,rt:"100% 0",rb:"100% 100%"}}followByMouseEvent(t){if(!this.initialized||!this.triangleData||!this.element||!this.subNavigation)return;this.mouseX=t.clientX-this.triangleData.itemRect.left,this.mouseY=t.clientY-this.triangleData.itemRect.top;const n=this.hasMouseEnteredSubNavigation(),s=this.getTriangleCoordinates(n?"fill-gap":"safe-triangle");s&&(this.element.style.setProperty("--db-navigation-item-clip-path",`polygon(${s.lb}, ${s.lt}, ${s.rt}, ${s.rb})`),n&&(this.triangleData=void 0))}}function C(e,t){const n=t||o.useRef(t),[s,u]=o.useState(()=>!1),[r,d]=o.useState(()=>!1),[l,b]=o.useState(()=>!0),[v,g]=o.useState(()=>!1),[p,m]=o.useState(()=>!1),[c,y]=o.useState(()=>{});function w(a){a?.target?.nodeName==="A"&&(m(!0),S(()=>{m(!1)},1e3))}function T(a){e.onClick&&(a.stopPropagation(),e.onClick(a)),r&&g(!0)}function x(a){a.stopPropagation(),g(!1)}return o.useEffect(()=>{u(!0)},[]),o.useEffect(()=>{e.subNavigationExpanded!==void 0&&g(!!f(e.subNavigationExpanded,"subNavigationExpanded"))},[e.subNavigationExpanded]),o.useEffect(()=>{if(s&&n.current){const a=n.current.querySelector("menu");a&&(a.children?.length>0?(d(!0),c||y(new M(n.current,a))):b(!1))}},[s,n.current]),i.jsxs("li",{ref:n,...E(e,["data-icon-variant","data-icon-variant-before","data-icon-variant-after","data-icon-weight","data-icon-weight-before","data-icon-weight-after","data-interactive","data-force-mobile","data-color","data-container-color","data-bg-color","data-on-bg-color","data-color-scheme","data-font-size","data-headline-size","data-divider","data-focus","data-font","data-density"]),id:e.id,onMouseOver:a=>c?.enableFollow(),onMouseLeave:a=>c?.disableFollow(),onMouseMove:a=>c?.followByMouseEvent(a),...D(e,["data-icon-variant","data-icon-variant-before","data-icon-variant-after","data-icon-weight","data-icon-weight-before","data-icon-weight-after","data-interactive","data-force-mobile","data-color","data-container-color","data-bg-color","data-on-bg-color","data-color-scheme","data-font-size","data-headline-size","data-divider","data-focus","data-font","data-density"]),className:N("db-navigation-item",e.className),"data-width":e.width,"data-icon":e.icon,"data-show-icon":h(e.showIcon),"data-active":e.active,"data-wrap":h(e.wrap),"aria-disabled":h(e.disabled),children:[l?null:i.jsx(i.Fragment,{children:e.text?i.jsx(i.Fragment,{children:e.text}):i.jsx(i.Fragment,{children:e.children})}),l?i.jsxs(i.Fragment,{children:[i.jsx("button",{className:"db-navigation-item-expand-button","aria-haspopup":r,"aria-expanded":v,disabled:f(e.disabled,"disabled"),onClick:a=>T(a),children:e.text?i.jsx(i.Fragment,{children:e.text}):i.jsx(i.Fragment,{children:e.children})}),i.jsxs("menu",{className:"db-sub-navigation","data-force-close":p,onClick:a=>w(a),children:[r?i.jsx("div",{className:"db-mobile-navigation-back",children:i.jsx(R,{icon:"arrow_left",variant:"ghost",id:e.backButtonId,onClick:a=>x(a),children:e.backButtonText??k})}):null,i.jsx(i.Fragment,{children:e.subNavigation})]})]}):null]})}const I=o.forwardRef(C);I.__docgenInfo={description:"",methods:[],displayName:"DBNavigationItem",props:{active:{required:!1,tsType:{name:"boolean"},description:'Alternative indicator for active navigation item (bold font). In contrast to the use of aria-current="page" on the contained anchor, this does not guarantee correct a11y.'},disabled:{required:!1,tsType:{name:"union",raw:"boolean | string",elements:[{name:"boolean"},{name:"string"}]},description:"The disabled attribute can be set to [keep a user from clicking on the item](https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button#disabled)."},subNavigation:{required:!1,tsType:{name:"any"},description:"React-specific property to pass in a slot for sub-navigation"},subNavigationExpanded:{required:!1,tsType:{name:"union",raw:"boolean | string",elements:[{name:"boolean"},{name:"string"}]},description:"This is for mobile navigation only, if it is set the sub-navigation is a static overlay"},children:{required:!1,tsType:{name:"any"},description:"default slot"},className:{required:!1,tsType:{name:"string"},description:"React specific for adding className to the component."},class:{required:!1,tsType:{name:"union",raw:"string | any",elements:[{name:"string"},{name:"any"}]},description:"Workaround for TypeScript using class for all components."},id:{required:!1,tsType:{name:"string"},description:"[ID](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/id) of the component, generated automatically for some components as a fallback if unset."},autofocus:{required:!1,tsType:{name:"union",raw:"boolean | string",elements:[{name:"boolean"},{name:"string"}]},description:"Before using please check for the [accessibility concerns](https://developer.mozilla.org/en-US/docs/Web/HTML/Global_attributes/autofocus#accessibility_concerns)"},onClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: ClickEvent<T>) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent<T, MouseEvent>",elements:[{name:"T"},{name:"MouseEvent"}]},name:"event"}],return:{name:"void"}}},description:"React specific onClick to pass to forward ref."},click:{required:!1,tsType:{name:"signature",type:"function",raw:"(event: ClickEvent<T>) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent<T, MouseEvent>",elements:[{name:"T"},{name:"MouseEvent"}]},name:"event"}],return:{name:"void"}}},description:""},icon:{required:!1,tsType:{name:"IconTypes"},description:"Define an icon by its identifier (like e.g. _user_, compare to [Icons](https://design-system.deutschebahn.com/core-web/review/main/foundations/icons/overview)) to get displayed in front of the elements content."},width:{required:!1,tsType:{name:"union",raw:"WidthType | string",elements:[{name:"unknown[number]",raw:"(typeof WidthList)[number]"},{name:"string"}]},description:"Width of the component. Auto width based on children size, full width based on parent elements width."},wrap:{required:!1,tsType:{name:"union",raw:"boolean | string",elements:[{name:"boolean"},{name:"string"}]},description:"Determines whether the text should wrap when its parent container is too small, preventing overflow."},backButtonId:{required:!1,tsType:{name:"string"},description:"The backButtonId attribute changes the id inside the back button."},backButtonText:{required:!1,tsType:{name:"string"},description:"The backButtonText attribute changes the text inside the back button."},showIcon:{required:!1,tsType:{name:"union",raw:"boolean | string",elements:[{name:"boolean"},{name:"string"}]},description:`Enables or disables the visibility of the icon. The default value depends on the component.
For many components this property is optional to reflect Figma properties.`},text:{required:!1,tsType:{name:"string"},description:"Alternative for default slot/children."}}};export{I as D,W as i};
